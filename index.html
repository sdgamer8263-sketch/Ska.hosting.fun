<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SKA HOSTING</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:Arial}
body{
  margin:0;min-height:100vh;color:#0ff;
  background:
   linear-gradient(rgba(0,0,0,.55),rgba(0,0,0,.55)),
   url("fx58j1opheu71.gif") center/cover fixed;
}
.center{text-align:center}
.hidden{display:none}
.card{
  max-width:520px;margin:20px auto;
  padding:20px;border-radius:18px;
  background:rgba(0,0,0,.5);
  backdrop-filter:blur(10px);
  box-shadow:0 0 20px #0ff;
}
input,select,button{
  width:100%;padding:10px;margin:6px 0;
  border-radius:8px;border:none;
}
button{
  background:#0ff;color:#000;
  cursor:pointer;transition:.2s;
}
button:active{transform:scale(.95)}
canvas{width:100%;height:150px;margin-top:10px}
.neon{text-shadow:0 0 10px #0ff}

#logo{
  width:60px;
  animation:spin 30s linear infinite;
}
@keyframes spin{
  from{transform:rotate(0)}
  to{transform:rotate(360deg)}
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="center" style="padding:15px">
  <img id="logo" src="file_00000000387071faa7c92db633a8f726.png"><br>
  <b class="neon">SKA HOSTING</b>
</div>

<!-- LOGIN -->
<div id="loginBox" class="card">
  <h2 class="center">Login</h2>
  <input id="luser" placeholder="Username">
  <input id="lpass" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="hidden">

  <!-- ADMIN TOOL -->
  <div id="adminTools" class="card hidden">
    <h3 class="center">Admin Tool</h3>
    <div class="center neon">Admin access enabled</div>
  </div>

  <!-- SERVER STATUS -->
  <div class="card">
    <h3 class="center">Server Status</h3>

    <input id="sip" placeholder="Server IP">
    <select id="stype">
      <option value="java">Java</option>
      <option value="bedrock">Bedrock</option>
      <option value="geyser">Geyser</option>
    </select>
    <input id="sport" placeholder="Port (auto)">
    <button onclick="checkStatus()">Check Status</button>

    <div id="serverName" class="center neon"></div>
    <div id="serverInfo" class="center"></div>
  </div>

  <!-- SERVER PING -->
  <div class="card">
    <h3 class="center">Server Ping</h3>
    <button onclick="checkPing()">Ping Server</button>
    <div id="pingResult" class="center"></div>
    <canvas id="pingGraph"></canvas>
  </div>

</div>

<script>
/* ================= ADMIN ================= */
const ADMIN_USER = "skahosting";
const ADMIN_PASS = "Z62BGma)qTi!Szsl";

/* ================= SESSION ================= */
if(sessionStorage.getItem("login")){
  showDashboard(sessionStorage.getItem("login"));
}

/* ================= LOGIN ================= */
function login(){
  const u = luser.value.trim();
  const p = lpass.value.trim();

  if(u === ADMIN_USER && p === ADMIN_PASS){
    sessionStorage.setItem("login","admin");
    showDashboard("admin");
    return;
  }
  alert("Invalid login");
}

function showDashboard(role){
  loginBox.classList.add("hidden");
  dashboard.classList.remove("hidden");
  if(role === "admin"){
    adminTools.classList.remove("hidden");
  }
}

/* ================= SERVER STATUS ================= */
function checkStatus(){
  let ip = sip.value.trim();
  let type = stype.value;
  let port = sport.value.trim();

  if(!ip) return alert("Enter IP");

  if(type === "geyser") type = "java";
  if(type === "bedrock" && !port) port = 19132;

  fetch(`https://api.mcsrvstat.us/2/${ip}${port?":"+port:""}`)
  .then(r=>r.json())
  .then(d=>{
    const name =
      d.motd?.clean?.join(" ") ||
      d.hostname ||
      "Unknown Server";

    serverName.innerText = name;

    serverInfo.innerHTML = d.online
      ? `ðŸŸ¢ Online<br>Players: ${d.players.online}/${d.players.max}`
      : `ðŸ”´ Offline`;
  })
  .catch(()=>alert("Status error"));
}

/* ================= PING ================= */
let pingHistory=[];
let minPing=null,maxPing=null;

function checkPing(){
  const ip = sip.value.trim();
  if(!ip) return alert("Enter IP");

  fetch(`https://ping-yies.onrender.com/ping?ip=${ip}`)
  .then(r=>r.json())
  .then(d=>{
    const ping = d.ping;
    const time = new Date().toLocaleTimeString();

    pingHistory.push(ping);
    if(pingHistory.length>20) pingHistory.shift();

    minPing = minPing===null?ping:Math.min(minPing,ping);
    maxPing = maxPing===null?ping:Math.max(maxPing,ping);

    pingResult.innerHTML = `
      ðŸ“¡ <b>${ping} ms</b><br>
      â¬‡ Min: ${minPing} ms |
      â¬† Max: ${maxPing} ms<br>
      ðŸ•’ ${time}
    `;

    drawPingGraph();
  })
  .catch(()=>alert("Ping error"));
}

function drawPingGraph(){
  const c = pingGraph;
  const ctx = c.getContext("2d");
  c.width = c.offsetWidth;
  c.height = 150;

  ctx.clearRect(0,0,c.width,c.height);
  ctx.strokeStyle="#0ff";
  ctx.lineWidth=2;
  ctx.beginPath();

  pingHistory.forEach((p,i)=>{
    const x = i*(c.width/(pingHistory.length-1||1));
    const y = c.height - Math.min(p,400)/400*c.height;
    i===0?ctx.moveTo(x,y):ctx.lineTo(x,y);
  });
  ctx.stroke();
}
</script>

</body>
</html>
