<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SKA HOSTING</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:'Segoe UI',Arial}
body{
  margin:0;min-height:100vh;color:#0ff;
  background:
   linear-gradient(rgba(0,0,0,.5),rgba(0,0,0,.5)),
   url("fx58j1opheu71.gif") center/cover fixed;
}
.center{text-align:center}
.hidden{display:none}

/* ====== GAMING UI ====== */
.card{
  max-width:520px;margin:20px auto;
  padding:22px;border-radius:22px;
  background:rgba(0,0,0,.55);
  backdrop-filter:blur(12px);
  box-shadow:0 0 25px #00ffff55;
  animation:fadeIn .5s ease;
}
@keyframes fadeIn{from{opacity:0;transform:scale(.95)}to{opacity:1}}
input,select{
  width:100%;padding:12px;margin:8px 0;
  border-radius:12px;border:none;
  background:#000;color:#0ff;
  box-shadow:inset 0 0 10px #00ffff55;
}
button{
  width:100%;padding:12px;margin:8px 0;
  border:none;border-radius:14px;
  background:#0ff;color:#000;
  font-weight:bold;
  cursor:pointer;
  transition:.2s;
  box-shadow:0 0 15px #0ff;
}
button:hover{box-shadow:0 0 25px #0ff}
button:active{transform:scale(.93)}

.neon{text-shadow:0 0 12px #0ff}
canvas{width:100%;height:150px;margin-top:10px}

#logo{
  width:64px;
  animation:spin 30s linear infinite;
}
@keyframes spin{
  from{transform:rotate(0)}
  to{transform:rotate(360deg)}
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="center" style="padding:18px">
  <img id="logo" src="file_00000000387071faa7c92db633a8f726.png"><br>
  <b class="neon">SKA HOSTING</b>
</div>

<!-- LOGIN -->
<div id="loginBox" class="card">
  <h2 class="center neon">Login</h2>
  <input id="luser" placeholder="Username">
  <input id="lpass" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <button onclick="showRegister()">Register</button>
</div>

<!-- REGISTER -->
<div id="registerBox" class="card hidden">
  <h2 class="center neon">Register</h2>
  <input id="ruser" placeholder="Username">
  <input id="rpass" type="password" placeholder="Password">
  <button onclick="register()">Create Account</button>
  <button onclick="backLogin()">Back</button>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="hidden">

  <!-- ADMIN TOOL -->
  <div id="adminTools" class="card hidden">
    <h3 class="center neon">ðŸ‘‘ Admin Tool</h3>
    <div class="center">Welcome Admin</div>
  </div>

  <!-- SERVER STATUS -->
  <div class="card">
    <h3 class="center neon">Server Status</h3>
    <input id="sip" placeholder="Server IP">
    <select id="stype">
      <option value="java">Java</option>
      <option value="bedrock">Bedrock</option>
      <option value="geyser">Geyser</option>
    </select>
    <input id="sport" placeholder="Port (auto)">
    <button onclick="checkStatus()">Check Status</button>

    <div id="serverName" class="center neon"></div>
    <div id="serverInfo" class="center"></div>
  </div>

  <!-- SERVER PING -->
  <div class="card">
    <h3 class="center neon">Server Ping</h3>
    <button onclick="checkPing()">Ping Server</button>
    <div id="pingResult" class="center"></div>
    <canvas id="pingGraph"></canvas>
  </div>

</div>

<script>
/* ===== ADMIN ===== */
const ADMIN_USER = "skahosting";
const ADMIN_PASS = "Z62BGma)qTi!Szs";

/* ===== AUTO LOGIN ===== */
if(sessionStorage.getItem("role")){
  showDashboard(sessionStorage.getItem("role"));
}

/* ===== LOGIN ===== */
function login(){
  const u = luser.value.trim();
  const p = lpass.value.trim();

  // ADMIN
  if(u === ADMIN_USER && p === ADMIN_PASS){
    sessionStorage.setItem("role","admin");
    showDashboard("admin");
    return;
  }

  // NORMAL USER
  const users = JSON.parse(localStorage.getItem("users")||"{}");
  if(users[u] && users[u] === p){
    sessionStorage.setItem("role","user");
    showDashboard("user");
    return;
  }

  alert("Wrong username or password");
}

/* ===== REGISTER ===== */
function register(){
  const u=ruser.value.trim();
  const p=rpass.value.trim();
  if(!u||!p) return alert("Fill all fields");
  if(u===ADMIN_USER) return alert("Username reserved");

  const users=JSON.parse(localStorage.getItem("users")||"{}");
  if(users[u]) return alert("User already exists");

  users[u]=p;
  localStorage.setItem("users",JSON.stringify(users));
  alert("Registered successfully");
  backLogin();
}

function showRegister(){
  loginBox.classList.add("hidden");
  registerBox.classList.remove("hidden");
}
function backLogin(){
  registerBox.classList.add("hidden");
  loginBox.classList.remove("hidden");
}

function showDashboard(role){
  loginBox.classList.add("hidden");
  registerBox.classList.add("hidden");
  dashboard.classList.remove("hidden");

  if(role==="admin"){
    adminTools.classList.remove("hidden");
  }else{
    adminTools.classList.add("hidden");
  }
}

/* ===== SERVER STATUS ===== */
function checkStatus(){
  let ip=sip.value.trim();
  let type=stype.value;
  let port=sport.value.trim();
  if(!ip) return alert("Enter IP");

  if(type==="geyser") type="java";
  if(type==="bedrock" && !port) port=19132;

  fetch(`https://api.mcsrvstat.us/2/${ip}${port?":"+port:""}`)
  .then(r=>r.json())
  .then(d=>{
    serverName.innerText =
      d.motd?.clean?.join(" ") || d.hostname || "Unknown Server";
    serverInfo.innerHTML = d.online
      ? `ðŸŸ¢ Online<br>Players: ${d.players.online}/${d.players.max}`
      : `ðŸ”´ Offline`;
  });
}

/* ===== PING ===== */
let pingHistory=[],minPing=null,maxPing=null;
function checkPing(){
  const ip=sip.value.trim();
  if(!ip) return alert("Enter IP");

  fetch(`https://ping-yies.onrender.com/ping?ip=${ip}`)
  .then(r=>r.json())
  .then(d=>{
    const p=d.ping;
    const t=new Date().toLocaleTimeString();
    pingHistory.push(p);
    if(pingHistory.length>20) pingHistory.shift();
    minPing=minPing===null?p:Math.min(minPing,p);
    maxPing=maxPing===null?p:Math.max(maxPing,p);

    pingResult.innerHTML=
      `ðŸ“¡ ${p} ms<br>â¬‡ ${minPing} | â¬† ${maxPing}<br>ðŸ•’ ${t}`;
    drawPingGraph();
  });
}
function drawPingGraph(){
  const c=pingGraph,ctx=c.getContext("2d");
  c.width=c.offsetWidth;c.height=150;
  ctx.clearRect(0,0,c.width,c.height);
  ctx.strokeStyle="#0ff";ctx.lineWidth=2;ctx.beginPath();
  pingHistory.forEach((p,i)=>{
    const x=i*(c.width/(pingHistory.length-1||1));
    const y=c.height-(Math.min(p,400)/400)*c.height;
    i?ctx.lineTo(x,y):ctx.moveTo(x,y);
  });
  ctx.stroke();
}
</script>

</body>
</html>
