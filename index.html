<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SKA HOSTING</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{
  margin:0;min-height:100vh;color:#0ff;
  background:
   linear-gradient(rgba(0,0,0,.55),rgba(0,0,0,.55)),
   url("fx58j1opheu71.gif") center/cover fixed;
}
.center{text-align:center}
.hidden{display:none}
.neon{ text-shadow:0 0 10px #0ff }
button{
  padding:10px 18px;
  border:none;border-radius:10px;
  background:#0ff;color:#000;
  cursor:pointer;
  transition:.2s;
}
button:active{transform:scale(.95)}
input,select{
  width:100%;padding:10px;margin:6px 0;
  border-radius:8px;border:none;
}
.card{
  background:rgba(0,0,0,.5);
  backdrop-filter:blur(10px);
  padding:20px;border-radius:20px;
  max-width:500px;margin:20px auto;
  box-shadow:0 0 20px #0ff;
}
canvas{width:100%;height:150px;margin-top:10px}
#logo{
  width:60px;
  animation:spin 30s linear infinite;
}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
</style>
</head>

<body>

<!-- HEADER -->
<div class="center" style="padding:20px">
  <img id="logo" src="file_00000000387071faa7c92db633a8f726.png"><br>
  <b class="neon">SKA HOSTING</b>
</div>

<!-- LOGIN -->
<div id="loginBox" class="card">
  <h2 class="center">Login</h2>
  <input id="luser" placeholder="Username">
  <input id="lpass" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <button onclick="showRegister()">Register</button>
</div>

<!-- REGISTER -->
<div id="registerBox" class="card hidden">
  <h2 class="center">Register</h2>
  <input id="ruser" placeholder="Username">
  <input id="rpass" type="password" placeholder="Password">
  <button onclick="register()">Create</button>
  <button onclick="backLogin()">Back</button>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="hidden">

  <!-- SERVER STATUS -->
  <div class="card">
    <h3 class="center">Server Status</h3>
    <input id="sip" placeholder="Server IP">
    <select id="stype">
      <option value="java">Java</option>
      <option value="bedrock">Bedrock</option>
      <option value="geyser">Geyser</option>
    </select>
    <input id="sport" placeholder="Port (auto)">
    <button onclick="checkStatus()">Check</button>

    <div id="sname" class="center neon"></div>
    <div id="sinfo" class="center"></div>
  </div>

  <!-- SERVER PING -->
  <div class="card">
    <h3 class="center">Server Ping</h3>
    <button onclick="checkPing()">Ping</button>
    <div id="pingInfo" class="center"></div>
    <canvas id="pingGraph"></canvas>
  </div>

</div>

<script>
/* ADMIN */
const ADMIN_USER="skahosting";
const ADMIN_PASS="Z62BGma)qTi!Szsl";

/* SESSION */
if(sessionStorage.getItem("login")){
  showDashboard();
}

/* LOGIN */
function login(){
  const u=luser.value,p=lpass.value;
  if(u===ADMIN_USER && p===ADMIN_PASS){
    sessionStorage.setItem("login","admin");
    showDashboard();
    return;
  }
  let users=JSON.parse(localStorage.getItem("users")||"{}");
  if(users[u] && users[u].p===p){
    sessionStorage.setItem("login","user");
    showDashboard();
  }else alert("Wrong login");
}

/* REGISTER */
function register(){
  let u=ruser.value,p=rpass.value;
  if(!u||!p)return alert("Fill all");
  if(u===ADMIN_USER)return alert("Reserved");
  let users=JSON.parse(localStorage.getItem("users")||"{}");
  users[u]={p};
  localStorage.setItem("users",JSON.stringify(users));
  alert("Registered");
  backLogin();
}
function showRegister(){
  loginBox.classList.add("hidden");
  registerBox.classList.remove("hidden");
}
function backLogin(){
  registerBox.classList.add("hidden");
  loginBox.classList.remove("hidden");
}
function showDashboard(){
  loginBox.classList.add("hidden");
  registerBox.classList.add("hidden");
  dashboard.classList.remove("hidden");
}

/* STATUS */
function checkStatus(){
  let ip=sip.value,type=stype.value,port=sport.value;
  if(type!=="java" && !port) port=19132;
  fetch(`https://api.mcsrvstat.us/2/${ip}:${port}`)
  .then(r=>r.json())
  .then(d=>{
    sname.innerText=d.motd?.clean?.[0]||"Unknown Server";
    sinfo.innerHTML=
      d.online
      ?`ðŸŸ¢ Online<br>Players: ${d.players.online}/${d.players.max}`
      :"ðŸ”´ Offline";
  });
}

/* PING */
let hist=[],min=null,max=null;
function checkPing(){
  let ip=sip.value;
  fetch(`https://ping-yies.onrender.com/ping?ip=${ip}`)
  .then(r=>r.json())
  .then(d=>{
    let p=d.ping,t=new Date().toLocaleTimeString();
    hist.push(p); if(hist.length>20)hist.shift();
    min=min===null?p:Math.min(min,p);
    max=max===null?p:Math.max(max,p);
    pingInfo.innerHTML=
      `Ping: ${p} ms<br>Min: ${min} | Max: ${max}<br>${t}`;
    draw();
  });
}
function draw(){
  let c=pingGraph,ctx=c.getContext("2d");
  c.width=c.offsetWidth;c.height=150;
  ctx.clearRect(0,0,c.width,c.height);
  ctx.strokeStyle="#0ff";ctx.beginPath();
  hist.forEach((p,i)=>{
    let x=i*(c.width/(hist.length-1||1));
    let y=c.height-(p/400)*c.height;
    i?ctx.lineTo(x,y):ctx.moveTo(x,y);
  });
  ctx.stroke();
}
</script>

</body>
</html>
